{"version":3,"file":"static/js/531.cccd062a.chunk.js","mappings":"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","sources":["pages/News.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useParams, useNavigate } from 'react-router-dom';\r\nimport { getNews, getNewsById, likeNews, addComment, deleteComment, addReply, deleteReply, getCurrentUser } from '../services/api';\r\nimport { FaHeart, FaRegHeart, FaComment, FaShare, FaTrash } from 'react-icons/fa';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\nconst News = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const [newsData, setNewsData] = useState([]);\r\n    const [singleNews, setSingleNews] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [comment, setComment] = useState('');\r\n    const [user, setUser] = useState(null);\r\n    const [commentError, setCommentError] = useState('');\r\n    const [replyingTo, setReplyingTo] = useState(null);\r\n    const [replyContent, setReplyContent] = useState('');\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            try {\r\n                const token = localStorage.getItem('userToken') || localStorage.getItem('adminToken');\r\n                if (token) {\r\n                    const userData = await getCurrentUser();\r\n                    setUser(userData);\r\n                }\r\n            } catch (err) {\r\n                console.error('Error fetching user:', err);\r\n                localStorage.removeItem('userToken');\r\n                localStorage.removeItem('adminToken');\r\n            }\r\n        };\r\n\r\n        const fetchData = async () => {\r\n            try {\r\n                setLoading(true);\r\n                await fetchUser();\r\n                \r\n                if (id) {\r\n                    const data = await getNewsById(id);\r\n                    if (!data) {\r\n                        setError('News post not found');\r\n                        return;\r\n                    }\r\n                    setSingleNews(data);\r\n                } else {\r\n                    const data = await getNews();\r\n                    setNewsData(data);\r\n                }\r\n                setError(null);\r\n            } catch (err) {\r\n                console.error('Error fetching data:', err);\r\n                setError(err.response?.data?.message || 'Failed to fetch data');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, [id]);\r\n\r\n    const handleLike = async (newsId) => {\r\n        const token = localStorage.getItem('userToken') || localStorage.getItem('adminToken');\r\n        if (!token) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const updatedNews = await likeNews(newsId);\r\n            if (id) {\r\n                setSingleNews(updatedNews);\r\n            } else {\r\n                setNewsData(prev => prev.map(n => n._id === newsId ? updatedNews : n));\r\n            }\r\n        } catch (err) {\r\n            console.error('Error liking news:', err);\r\n            if (err.response?.status === 401) {\r\n                localStorage.removeItem('userToken');\r\n                localStorage.removeItem('adminToken');\r\n                navigate('/login');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleComment = async (newsId) => {\r\n        const token = localStorage.getItem('userToken') || localStorage.getItem('adminToken');\r\n        if (!token) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        if (!comment.trim()) {\r\n            setCommentError('Please enter a comment');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setCommentError('');\r\n            const updatedNews = await addComment(newsId, comment);\r\n            if (id) {\r\n                setSingleNews(updatedNews);\r\n            } else {\r\n                setNewsData(prev => prev.map(n => n._id === newsId ? updatedNews : n));\r\n            }\r\n            setComment('');\r\n        } catch (err) {\r\n            console.error('Error adding comment:', err);\r\n            setCommentError('Failed to add comment. Please try again.');\r\n            if (err.response?.status === 401) {\r\n                localStorage.removeItem('userToken');\r\n                localStorage.removeItem('adminToken');\r\n                navigate('/login');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDeleteComment = async (commentId) => {\r\n        const token = localStorage.getItem('adminToken') || localStorage.getItem('userToken');\r\n        if (!token) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        const comment = singleNews.comments.find(c => c._id === commentId);\r\n        if (!comment) return;\r\n\r\n        // Check if user is admin or comment owner\r\n        if (user?.role !== 'admin' && user?._id !== comment.user?._id) {\r\n            setError('You are not authorized to delete this comment');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const updatedNews = await deleteComment(singleNews._id, commentId);\r\n            setSingleNews(updatedNews);\r\n        } catch (err) {\r\n            console.error('Error deleting comment:', err);\r\n            setError('Failed to delete comment');\r\n            if (err.response?.status === 401) {\r\n                localStorage.removeItem('userToken');\r\n                localStorage.removeItem('adminToken');\r\n                navigate('/login');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleReplySubmit = async (commentId) => {\r\n        const token = localStorage.getItem('adminToken') || localStorage.getItem('userToken');\r\n        if (!token) {\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        if (!replyContent.trim()) {\r\n            setCommentError('Please enter a reply');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setCommentError('');\r\n            const updatedNews = await addReply(singleNews._id, commentId, replyContent);\r\n            setSingleNews(updatedNews);\r\n            setReplyContent('');\r\n            setReplyingTo(null);\r\n        } catch (err) {\r\n            console.error('Error adding reply:', err);\r\n            setCommentError('Failed to add reply. Please try again.');\r\n            if (err.response?.status === 401) {\r\n                localStorage.removeItem('userToken');\r\n                localStorage.removeItem('adminToken');\r\n                navigate('/login');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDeleteReply = async (commentId, replyId) => {\r\n        console.log('Attempting to delete reply:', { commentId, replyId });\r\n        \r\n        const token = localStorage.getItem('adminToken') || localStorage.getItem('userToken');\r\n        if (!token) {\r\n            console.log('No token found, redirecting to login');\r\n            navigate('/login');\r\n            return;\r\n        }\r\n\r\n        const comment = singleNews.comments.find(c => c._id === commentId);\r\n        if (!comment) {\r\n            console.log('Comment not found:', commentId);\r\n            setError('Comment not found');\r\n            return;\r\n        }\r\n\r\n        const reply = comment.replies.find(r => r._id === replyId);\r\n        if (!reply) {\r\n            console.log('Reply not found:', replyId);\r\n            setError('Reply not found');\r\n            return;\r\n        }\r\n\r\n        // Check if user is admin or reply owner\r\n        if (user?.role !== 'admin' && user?._id !== reply.user?._id) {\r\n            console.log('User not authorized to delete reply:', { \r\n                userRole: user?.role, \r\n                userId: user?._id, \r\n                replyUserId: reply.user?._id \r\n            });\r\n            setError('You are not authorized to delete this reply');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            console.log('Sending delete request for reply:', { newsId: singleNews._id, commentId, replyId });\r\n            const updatedNews = await deleteReply(singleNews._id, commentId, replyId);\r\n            console.log('Reply deleted successfully, updating news:', updatedNews);\r\n            setSingleNews(updatedNews);\r\n            setError(null);\r\n        } catch (err) {\r\n            console.error('Error deleting reply:', err);\r\n            const errorMessage = err.response?.data?.error || err.message || 'Failed to delete reply';\r\n            console.log('Error details:', { \r\n                status: err.response?.status,\r\n                data: err.response?.data,\r\n                message: errorMessage\r\n            });\r\n            setError(errorMessage);\r\n            \r\n            if (err.response?.status === 401) {\r\n                console.log('Authentication error, clearing tokens and redirecting to login');\r\n                localStorage.removeItem('userToken');\r\n                localStorage.removeItem('adminToken');\r\n                navigate('/login');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleShare = (newsId) => {\r\n        const url = `${window.location.origin}/news/${newsId}`;\r\n        navigator.clipboard.writeText(url);\r\n        // Show a toast or notification that the link was copied\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"bg-gray-900 min-h-screen py-12 pt-24\" dir=\"rtl\">\r\n                <div className=\"container mx-auto px-4\">\r\n                    <div className=\"text-center\">\r\n                        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto\"></div>\r\n                        <p className=\"mt-4 text-lg text-gray-300\">جاري التحميل...</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"bg-gray-900 min-h-screen py-12 pt-24\" dir=\"rtl\">\r\n                <div className=\"container mx-auto px-4\">\r\n                    <div className=\"text-center\">\r\n                        <p className=\"text-red-400\">{error}</p>\r\n                        <button\r\n                            onClick={() => navigate('/news')}\r\n                            className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n                        >\r\n                            العودة إلى الأخبار\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (id && !singleNews) {\r\n        return (\r\n            <div className=\"bg-gray-900 min-h-screen py-12 pt-24\" dir=\"rtl\">\r\n                <div className=\"container mx-auto px-4\">\r\n                    <div className=\"text-center\">\r\n                        <p className=\"text-red-400\">لم يتم العثور على الخبر</p>\r\n                        <button\r\n                            onClick={() => navigate('/news')}\r\n                            className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\r\n                        >\r\n                            العودة إلى الأخبار\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (id) {\r\n        // Single news post view\r\n        return (\r\n            <div className=\"bg-gray-900 min-h-screen py-12 pt-24\" dir=\"rtl\">\r\n                <div className=\"container mx-auto px-4\">\r\n                    <div className=\"max-w-4xl mx-auto bg-gray-800 rounded-lg overflow-hidden\">\r\n                        {singleNews.image && (\r\n                            <img\r\n                                src={`${API_URL}${singleNews.image}`}\r\n                                alt={singleNews.title}\r\n                                className=\"w-full h-96 object-cover\"\r\n                                onError={(e) => {\r\n                                    e.target.onerror = null;\r\n                                    e.target.src = '/placeholder-image.jpg';\r\n                                }}\r\n                            />\r\n                        )}\r\n                        <div className=\"p-8\">\r\n                            <h1 className=\"text-3xl font-bold text-blue-400 mb-4\">{singleNews.title}</h1>\r\n                            <p className=\"text-gray-300 mb-4\">{singleNews.content}</p>\r\n                            <div className=\"flex items-center justify-between text-gray-400 text-sm mb-8\">\r\n                                <span>بواسطة {singleNews.author?.firstName} {singleNews.author?.lastName || 'مستخدم'}</span>\r\n                                <span>{new Date(singleNews.createdAt).toLocaleDateString('ar-SA' , { calendar: 'gregory' })}</span>\r\n                            </div>\r\n\r\n                            {/* Social Interactions */}\r\n                            <div className=\"border-t border-gray-700 pt-4\">\r\n                                <div className=\"flex items-center gap-4 mb-4\">\r\n                                    <button\r\n                                        onClick={() => handleLike(singleNews._id)}\r\n                                        className={`flex items-center gap-2 ${\r\n                                            singleNews.likes?.includes(user?._id)\r\n                                                ? 'text-red-500'\r\n                                                : 'text-gray-400'\r\n                                        }`}\r\n                                    >\r\n                                        {singleNews.likes?.includes(user?._id) ? (\r\n                                            <FaHeart className=\"text-xl\" />\r\n                                        ) : (\r\n                                            <FaRegHeart className=\"text-xl\" />\r\n                                        )}\r\n                                        <span>{singleNews.likes?.length || 0}</span>\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleShare(singleNews._id)}\r\n                                        className=\"text-gray-400 hover:text-blue-400\"\r\n                                    >\r\n                                        <FaShare className=\"text-xl\" />\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {/* Comments Section */}\r\n                                <div className=\"mt-8\">\r\n                                    <h3 className=\"text-xl font-bold text-blue-400 mb-4 flex items-center gap-2\">\r\n                                        <FaComment className=\"text-xl\" />\r\n                                        التعليقات ({singleNews.comments?.length || 0})\r\n                                    </h3>\r\n                                    {user && (\r\n                                        <div className=\"mb-4\">\r\n                                            <textarea\r\n                                                value={comment}\r\n                                                onChange={(e) => {\r\n                                                    setComment(e.target.value);\r\n                                                    setCommentError('');\r\n                                                }}\r\n                                                placeholder=\"اكتب تعليقك هنا...\"\r\n                                                className=\"w-full p-2 rounded bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:ring-1 focus:ring-blue-500\"\r\n                                                rows=\"3\"\r\n                                            />\r\n                                            {commentError && (\r\n                                                <p className=\"text-red-400 text-sm mt-1\">{commentError}</p>\r\n                                            )}\r\n                                            <button\r\n                                                onClick={() => handleComment(singleNews._id)}\r\n                                                className=\"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\"\r\n                                            >\r\n                                                تعليق\r\n                                            </button>\r\n                                        </div>\r\n                                    )}\r\n                                    <div className=\"space-y-4\">\r\n                                        {singleNews.comments?.map((comment) => (\r\n                                            <div key={comment._id} className=\"bg-gray-700 p-4 rounded\">\r\n                                                <div className=\"flex justify-between items-start\">\r\n                                                    <div>\r\n                                                        <p className=\"font-bold text-blue-400\">\r\n                                                            {comment.user?.firstName} {comment.user?.lastName || 'مستخدم'}\r\n                                                        </p>\r\n                                                        <p className=\"text-gray-300 mt-1\">\r\n                                                            {comment.content}\r\n                                                        </p>\r\n                                                        <div className=\"flex items-center gap-4 mt-2\">\r\n                                                            {user && (\r\n                                                                <button\r\n                                                                    onClick={() => setReplyingTo(comment._id)}\r\n                                                                    className=\"text-blue-400 hover:text-blue-300 text-sm flex items-center gap-1\"\r\n                                                                >\r\n                                                                    <FaComment className=\"text-sm\" />\r\n                                                                    رد\r\n                                                                </button>\r\n                                                            )}\r\n                                                            {(user?.role === 'admin' || user?._id === comment.user?._id) && (\r\n                                                                <button\r\n                                                                    onClick={() => handleDeleteComment(comment._id)}\r\n                                                                    className=\"text-red-400 hover:text-red-300 text-sm flex items-center gap-1\"\r\n                                                                >\r\n                                                                    <FaTrash className=\"text-sm\" />\r\n                                                                    حذف\r\n                                                                </button>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <p className=\"text-gray-400 text-sm mt-2\">\r\n                                                    {new Date(comment.createdAt).toLocaleDateString('ar-SA', { calendar: 'gregory' })}\r\n                                                </p>\r\n\r\n                                                {/* Replies List */}\r\n                                                {comment.replies && comment.replies.length > 0 && (\r\n                                                    <div className=\"mt-3 mr-4 space-y-2\">\r\n                                                        {comment.replies.map((reply) => (\r\n                                                            <div key={reply._id} className=\"bg-gray-600 p-3 rounded\">\r\n                                                                <div className=\"flex justify-between items-start\">\r\n                                                                    <div>\r\n                                                                        <p className=\"font-semibold text-blue-400\">\r\n                                                                            {reply.user?.firstName} {reply.user?.lastName}\r\n                                                                        </p>\r\n                                                                        <p className=\"text-gray-300 text-sm mt-1\">\r\n                                                                            {reply.content}\r\n                                                                        </p>\r\n                                                                    </div>\r\n                                                                    {(user?.role === 'admin' || user?._id === reply.user?._id) && (\r\n                                                                        <button\r\n                                                                            onClick={() => handleDeleteReply(comment._id, reply._id)}\r\n                                                                            className=\"text-red-400 hover:text-red-300 text-sm\"\r\n                                                                        >\r\n                                                                            <FaTrash />\r\n                                                                        </button>\r\n                                                                    )}\r\n                                                                </div>\r\n                                                                <p className=\"text-gray-400 text-xs mt-1\">\r\n                                                                    {new Date(reply.createdAt).toLocaleDateString('ar-SA', { calendar: 'gregory' })}\r\n                                                                </p>\r\n                                                            </div>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                )}\r\n\r\n                                                {/* Reply Form */}\r\n                                                {replyingTo === comment._id && (\r\n                                                    <div className=\"mt-3 mr-4\">\r\n                                                        <textarea\r\n                                                            value={replyContent}\r\n                                                            onChange={(e) => setReplyContent(e.target.value)}\r\n                                                            placeholder=\"اكتب ردك هنا...\"\r\n                                                            className=\"w-full p-2 rounded bg-gray-600 text-white border border-gray-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500\"\r\n                                                            rows=\"2\"\r\n                                                        />\r\n                                                        <div className=\"flex gap-2 mt-2\">\r\n                                                            <button\r\n                                                                onClick={() => handleReplySubmit(comment._id)}\r\n                                                                className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm\"\r\n                                                            >\r\n                                                                إرسال\r\n                                                            </button>\r\n                                                            <button\r\n                                                                onClick={() => {\r\n                                                                    setReplyingTo(null);\r\n                                                                    setReplyContent('');\r\n                                                                }}\r\n                                                                className=\"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm\"\r\n                                                            >\r\n                                                                إلغاء\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // News list view\r\n    return (\r\n        <div className=\"bg-gray-900 min-h-screen py-12 pt-24\" dir=\"rtl\">\r\n            <div className=\"container mx-auto px-4\">\r\n                <h1 className=\"text-4xl font-bold text-blue-400 mb-8\">آخر الأخبار</h1>\r\n                <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n                    {newsData.map((item) => (\r\n                        <div key={item._id} className=\"bg-gray-800 rounded-lg overflow-hidden\">\r\n                            <Link to={`/news/${item._id}`}>\r\n                                {item.image && (\r\n                                    <img\r\n                                        src={`${API_URL}${item.image}`}\r\n                                        alt={item.title}\r\n                                        className=\"w-full h-48 object-cover\"\r\n                                        onError={(e) => {\r\n                                            e.target.onerror = null;\r\n                                            e.target.src = '/placeholder-image.jpg';\r\n                                        }}\r\n                                    />\r\n                                )}\r\n                            </Link>\r\n                            <div className=\"p-6\">\r\n                                <Link to={`/news/${item._id}`}>\r\n                                    <h2 className=\"text-xl font-bold text-blue-400 mb-2\">{item.title}</h2>\r\n                                </Link>\r\n                                <p className=\"text-gray-300 mb-4 line-clamp-3\">{item.content}</p>\r\n                                <div className=\"flex items-center justify-between text-gray-400 text-sm\">\r\n                                    <span>بواسطة {item.author?.firstName} {item.author?.lastName || 'مستخدم'}</span>\r\n                                    <span>{new Date(item.createdAt).toLocaleDateString('ar-SA')}</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-4 mt-4\">\r\n                                    <button\r\n                                        onClick={() => handleLike(item._id)}\r\n                                        className={`flex items-center gap-2 ${\r\n                                            item.likes.includes(user?._id)\r\n                                                ? 'text-red-500'\r\n                                                : 'text-gray-400'\r\n                                        }`}\r\n                                    >\r\n                                        {item.likes.includes(user?._id) ? (\r\n                                            <FaHeart className=\"text-xl\" />\r\n                                        ) : (\r\n                                            <FaRegHeart className=\"text-xl\" />\r\n                                        )}\r\n                                        <span>{item.likes.length}</span>\r\n                                    </button>\r\n                                    <Link\r\n                                        to={`/news/${item._id}`}\r\n                                        className=\"flex items-center gap-2 text-gray-400\"\r\n                                    >\r\n                                        <FaComment className=\"text-xl\" />\r\n                                        <span>{item.comments.length}</span>\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default News; "],"names":["API_URL","process","id","useParams","navigate","useNavigate","useState","newsData","setNewsData","singleNews","setSingleNews","loading","setLoading","error","setError","comment","setComment","user","setUser","commentError","setCommentError","replyingTo","setReplyingTo","replyContent","setReplyContent","useEffect","fetchUser","localStorage","getItem","getCurrentUser","userData","console","removeItem","fetchData","getNewsById","data","getNews","response","message","handleLike","newsId","likeNews","updatedNews","prev","map","n","_id","status","handleComment","trim","addComment","handleDeleteComment","commentId","comments","find","c","role","deleteComment","handleReplySubmit","addReply","handleDeleteReply","replyId","log","reply","replies","r","userRole","userId","replyUserId","deleteReply","errorMessage","className","dir","onClick","image","src","alt","title","onError","e","target","onerror","content","author","firstName","lastName","Date","createdAt","toLocaleDateString","calendar","likes","includes","length","url","window","location","origin","navigator","clipboard","writeText","handleShare","value","onChange","placeholder","rows","item","to"],"sourceRoot":""}