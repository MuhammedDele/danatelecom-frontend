"use strict";(self.webpackChunkdanatelecom=self.webpackChunkdanatelecom||[]).push([[490],{3490:function(e,r,s){s.r(r);var n=s(5861),t=s(4942),a=s(1413),o=s(885),l=s(7757),i=s.n(l),c=s(2791),u=s(6871),d=s(4390),m=s(184);r.default=function(){var e=(0,u.s0)(),r=(0,c.useState)(!1),s=(0,o.Z)(r,2),l=s[0],p=s[1],f=(0,c.useState)({username:"",firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),b=(0,o.Z)(f,2),x=b[0],h=b[1],g=(0,c.useState)(""),y=(0,o.Z)(g,2),w=y[0],v=y[1],j=(0,c.useState)(!1),N=(0,o.Z)(j,2),k=N[0],O=N[1];(0,c.useEffect)((function(){console.log("Login component mounted")}),[]);var P=function(e){h((0,a.Z)((0,a.Z)({},x),{},(0,t.Z)({},e.target.name,e.target.value)))},C=function(){var r=(0,n.Z)(i().mark((function r(s){var n,t,a,o,c,u,m;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s.preventDefault(),v(""),O(!0),r.prev=3,!l){r.next=19;break}if(x.password===x.confirmPassword){r.next=9;break}return v("\u0643\u0644\u0645\u0627\u062a \u0627\u0644\u0645\u0631\u0648\u0631 \u063a\u064a\u0631 \u0645\u062a\u0637\u0627\u0628\u0642\u0629"),O(!1),r.abrupt("return");case 9:return n={username:x.username,email:x.email,password:x.password,firstName:x.firstName,lastName:x.lastName},console.log("Sending registration data:",n),r.next=13,(0,d.z2)(n);case 13:t=r.sent,console.log("Registration response:",t),t.token&&localStorage.setItem("userToken",t.token),t.user&&"admin"===t.user.role?e("/admin"):e("/profile"),r.next=27;break;case 19:return a={username:x.username,password:x.password},console.log("Sending login data:",a),r.next=23,(0,d.x4)(a);case 23:o=r.sent,console.log("Login response:",o),o.token&&localStorage.setItem("userToken",o.token),o.user&&"admin"===o.user.role?e("/admin"):e("/profile");case 27:r.next=34;break;case 29:r.prev=29,r.t0=r.catch(3),console.error(l?"Registration error:":"Login error:",r.t0),r.t0.response?(c=(null===(u=r.t0.response.data)||void 0===u?void 0:u.message)||(l?"\u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062d\u0633\u0627\u0628":"\u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"),400===r.t0.response.status&&"Username or email already exists"===(null===(m=r.t0.response.data)||void 0===m?void 0:m.message)&&(c="\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0623\u0648 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0627\u0644\u0641\u0639\u0644")):c=l?"\u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062d\u0633\u0627\u0628":"\u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",v(c);case 34:return r.prev=34,O(!1),r.finish(34);case 37:case"end":return r.stop()}}),r,null,[[3,29,34,37]])})));return function(e){return r.apply(this,arguments)}}(),S=function(){p(!l),v(""),h({username:"",firstName:"",lastName:"",email:"",password:"",confirmPassword:""})};return(0,m.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",dir:"rtl",children:(0,m.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-gray-800 p-8 rounded-lg shadow-lg",children:[(0,m.jsx)("div",{children:(0,m.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:l?"\u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 \u062c\u062f\u064a\u062f":"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"})}),(0,m.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:C,children:[w&&(0,m.jsx)("div",{className:"bg-red-500 text-white p-3 rounded text-center",children:w}),(0,m.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"username",className:"sr-only",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,m.jsx)("input",{id:"username",name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",value:x.username,onChange:P})]}),l&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"firstName",className:"sr-only",children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u0648\u0644"}),(0,m.jsx)("input",{id:"firstName",name:"firstName",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u0648\u0644",value:x.firstName,onChange:P})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"lastName",className:"sr-only",children:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"}),(0,m.jsx)("input",{id:"lastName",name:"lastName",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0627\u0626\u0644\u0629",value:x.lastName,onChange:P})]})]}),l&&(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"email",className:"sr-only",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"}),(0,m.jsx)("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a",value:x.email,onChange:P})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"password",className:"sr-only",children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),(0,m.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm ".concat(l?"":"rounded-b-md"),placeholder:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",value:x.password,onChange:P})]}),l&&(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"confirmPassword",className:"sr-only",children:"\u062a\u0623\u0643\u064a\u062f \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),(0,m.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-700 bg-gray-700 text-white placeholder-gray-400 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"\u062a\u0623\u0643\u064a\u062f \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",value:x.confirmPassword,onChange:P})]})]}),(0,m.jsx)("div",{children:(0,m.jsxs)("button",{type:"submit",disabled:k,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[k?(0,m.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,m.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,m.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,m.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):null,k?l?"\u062c\u0627\u0631\u064a \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062d\u0633\u0627\u0628...":"\u062c\u0627\u0631\u064a \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644...":l?"\u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628":"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"]})})]}),(0,m.jsx)("div",{className:"text-center text-sm text-gray-400 mt-4",children:l?(0,m.jsxs)(m.Fragment,{children:[" \u0644\u062f\u064a\u0643 \u062d\u0633\u0627\u0628 \u0628\u0627\u0644\u0641\u0639\u0644\u061f ",(0,m.jsx)("button",{onClick:S,className:"font-medium text-blue-400 hover:text-blue-300 focus:outline-none",children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"})]}):(0,m.jsxs)(m.Fragment,{children:["\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u062d\u0633\u0627\u0628\u061f ",(0,m.jsx)("button",{onClick:S,className:"font-medium text-blue-400 hover:text-blue-300 focus:outline-none",children:"\u0633\u062c\u0644 \u0627\u0644\u0622\u0646!"})]})})]})})}},4942:function(e,r,s){function n(e,r,s){return r in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}s.d(r,{Z:function(){return n}})},1413:function(e,r,s){s.d(r,{Z:function(){return a}});var n=s(4942);function t(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?t(Object(s),!0).forEach((function(r){(0,n.Z)(e,r,s[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))}))}return e}}}]);
//# sourceMappingURL=490.8aa0fc03.chunk.js.map